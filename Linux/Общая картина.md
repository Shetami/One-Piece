## Уровни абстракции
В Linux есть 3 основных уровня абстракции:
![[Pasted image 20240620185058.png]]
Что представляет из себя *Ядро (kaenel) Linux* - это программное обеспечение, содержащееся в памяти. Оно сообщает процессору, где находится следующая задача, являясь посредником между оборудованием и любой запущенной программой. По сути именно ядро и управляет нашим всем оборудованием напрямую. 
Теперь разберемся в понятии *Процессы* - запущенные программы которыми управляет ядро. и *Ядро* и *Процессы (Пользовательские процессы)* по сути являются программами, но они имеют большую разницу.
*Karnel mode*: имеет неограниченный доступ к процессору и оперативной памяти, собственно все самые небезопасные штуки происходят именно тут.
*User mode*: имеет доступ к подмножеству памяти, и может выполнять только безопасные операции процессора. 

## Оперативная память
Самая важная часть, так как именно там работает наше ядро и разные программы. Из того что тут стоит помнить это термин *state* - в простом понимании это особое состояние битов, например 0110, 0001, 1011 - это 3 разный состояния.

## Ядро
Отвечает за управлением задач 4 основных областей:
- **Процессы** - Ядро определяет, каким процессам разрешено использовать процессор.
- **Память** - менеджит память между процессами: кому сколько выделить, освободить, как разделить память и сколько ее свободно.
- **Драйверы устройств** -  Действует как интерфейс между оборудованием, а так же управляет им.
- **Системные вызовы** - Процессы используют системные вызовы для связи с ядром

Ядро отвечает за *переключение контекста*(передача управления одной программы другой). Во время данной операции ядро так же должно управлять памятью, но для это должны выполняться ряд условий:
- Ядро должно иметь в памяти выделенную область, к которой *user proceses* не имеют доступа
- Каждому *user proces* необходима собственная область памяти.
- *user proces* не может получить доступ к памяти другого *user proces*.
- *user proceses* могут работать совместно с памятью.
- Часть памяти *user proces* может быть доступна только для чтения.
- Система может использовать больше памяти чем ее есть в физическом смысле, используя дисковое пространство.

## Управление драйверами устройств
Драйверы являются частью ядра, они стремятся предоставить единый интерфейс для пользовательских процессов, чтоб упростить работу разработчика ПО.

## Системные вызовы и поддержка.
Системные вызовы нужны для выполнения определенных задач которые не может выполнить *user proces*. Например есть два важных системных вызова которые важны для понимания как запускаются процессы. 
- `fork()` - когда процесс вызывает `fork()` , ядро создает почти идентичную копию процесса.
- `exec()` - когда процесс вызывает `exec(program)` , ядро загружает и запускает программу `program`, заменяя текущий процесс.

Вот пример запуска команды `ls`:
  ![[Pasted image 20240620203410.png]]
  
## Пользовательское пространство
Определение простое - это оперативная память(ее часть) выделяемая для пользовательских процессов. Большая часть действий в Linux происходит именно в пользовательском пространстве. Вот примерная упрощенная схема как устроенно пользовательское пространство: 
![[Pasted image 20240620204857.png]]

## Пользователи
**User** - это сущность, которая может запускать процессы и управлять файлами. Пользователи могут быть объединены в группы, обладать разными правами. Но самое основное что всегда есть это *superuser*, *root* которые обладают максимальными правами и управлять процессами и правами других пользователей.

