Такой подход тоже иногда выдаёт блокировки
![[Pasted image 20240624175142.png|550]]WW(write WW(write write) конфликт - когда один перезатерает другой.
Нужно это как-то регулировать, чтобы не было конфликта, регулируется таким образом блокировки.
Транзакция должна блокироваться, ожидая результат старой

# Изоляция транзакций

Виды конфликтов при параллельном доступе к данным

- ### Грязное чтение (dirty read)
    Нельзя одной транзакции видеть обновления из другой, но можно видеть изменения после **commit**.
    ![[Pasted image 20240624175539.png|540]]
    
    Как видим вторая прочитала обновлённые данные с первой, но первая откатилась. То есть вторая получила некорректные данные
    
    В общем случае **некорректно** давать транзакции видеть изменения другой транзакции до того, как она закончится.
    
- ### Неповторяющееся чтение (nonrepeatable read)
    Получение разных данных в течение одной транзакции одинаковым запросом
    ![[Pasted image 20240624175724.png|540]]
- ### Фантомное чтение (phantom read)
    
    Тоже самое что и неповторяющееся, но только первая транзакция их добавляет, а не обновляет, то есть вторя видит разное количество
    ![[Pasted image 20240624175930.png|540]]

---